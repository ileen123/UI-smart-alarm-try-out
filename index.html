<!DOCTYPE html>
<html lang="nl">
<head>
    <!-- Meta tags for character encoding and responsive design -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Page title that appears in browser tab -->
    <title>Instellen Nieuwe Patiënt</title>
    
    <!-- Link to external CSS file for styling -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Patient information header section -->
    <div class="header">
        <span class="user-icon">👤</span>
        <span>34567 - S. Groen - Vrouw - 16 jaar - 55 kg</span>
    </div>
    
    <!-- Main page title -->
    <h1 class="main-title">Instellen Nieuwe Patiënt</h1>
    
    <!-- Progress indicator showing current step (1-4) -->
    <div class="progress-bar">
        <div class="step">
            <div class="step-number">1</div>
        </div>
        <div class="step-line"></div>
        <div class="step">
            <div class="step-number">2</div>
        </div>
        <div class="step-line"></div>
        <div class="step">
            <div class="step-number inactive">3</div>
        </div>
        <div class="step-line"></div>
        <div class="step">
            <div class="step-number inactive">✓</div>
        </div>
    </div>
    
    <!-- Container for the three main form sections - horizontal layout -->
    <div class="form-sections-container">
        <!-- Section 1: Main problem selection -->
        <div class="form-section">
            <h2 class="section-title">Wat is het hoofdprobleem?</h2>
            <div class="dropdown-container">
                <select class="problem-dropdown" id="problemDropdown">
                    <option value="">Selecteer een probleem...</option>
                    <option value="respiratoire-insufficientie">Respiratoire Insufficiëntie</option>
                    <option value="hart-falen">Hart Falen</option>
                    <option value="sepsis">Sepsis</option>
                    <option value="neurologische-aandoening">Neurologische Aandoening</option>
                    <option value="nierinsuffcientie">Nierinsufficiëntie</option>
                    <option value="leverfalen">Leverfalen</option>
                </select>
            </div>
        </div>
        
        <!-- Section 2: Risk level selection -->
        <div class="form-section">
            <h2 class="section-title">Wat is het risico - level van de patiënt?</h2>
            <div class="button-group">
                <button class="btn risk-low">Laag</button>
                <button class="btn risk-med">Mid</button>
                <button class="btn risk-high">Hoog</button>
            </div>
            <!-- Dynamic alarm indicator that changes based on risk level -->
            <div class="alarm-indicator">
                <div>🔔 🔔 🔔</div>
                <div>sneller een alarm</div>
            </div>
        </div>
        
        <!-- Section 3: Additional medical conditions/tags -->
        <div class="form-section">
            <h2 class="section-title">Selecteer eventueel additionele informatie:</h2>
            <div class="tags-section">
                <!-- First row of medical condition tags -->
                <div class="button-group">
                    <button class="btn tag-btn" data-condition="sepsis">Sepsis ⚙️</button>
                    <button class="btn tag-btn" data-condition="diabetes">Diabetes 🔧</button>
                </div>
                <!-- Second row of medical condition tags -->
                <div class="button-group">
                    <button class="btn tag-btn" data-condition="herstellende">Herstellende 👤</button>
                    <button class="btn tag-btn" data-condition="pneumonie">Pneumonie 🫁</button>
                </div>
                <!-- Third row with more button -->
                <div class="button-group">
                    <button class="btn tag-btn" data-condition="chronisch-nierfalen">Chronisch Nierfalen 🧠</button>
                    <!-- More button to show additional options -->
                    <button class="more-btn">⋯</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Section 4: Organ-level monitoring configuration -->
    <div class="monitoring-section">
        <h2 class="section-title">Monitoring op Orgaan Niveau</h2>
        
        <!-- Grid of organ monitoring circles -->
        <div class="monitoring-grid">
            <!-- Circulatory system -->
            <div class="monitor-item">
                <div class="monitor-label inactive-text">Circulatoir</div>
                <div id="heart-circle-container"></div>
                <div class="monitor-status inactive-text">los</div>
            </div>
            <!-- Respiratory system -->
            <div class="monitor-item">
                <div class="monitor-label inactive-text">Respiratoir</div>
                <div id="lung-circle-container"></div>
                <div class="monitor-status inactive-text">los</div>
            </div>
            <!-- Other/Temperature system -->
            <div class="monitor-item">
                <div class="monitor-label inactive-text">Overig</div>
                <div id="temp-circle-container"></div>
                <div class="monitor-status inactive-text">los</div>
            </div>
        </div>
        
        <!-- Parameter value cards showing normal ranges for each organ system -->
        <div class="monitor-values">
            <!-- Circulatory parameters -->
            <div class="value-card">
                <div class="value-label inactive-text">HR</div>
                <div class="value-number inactive-text">70 - 110</div>
                <div class="value-label inactive-text">BP Mean</div>
                <div class="value-number inactive-text">65 - 85</div>
            </div>
            
            <!-- Respiratory parameters -->
            <div class="value-card">
                <div class="value-label inactive-text">Saturatie</div>
                <div class="value-number inactive-text">90 - 100</div>
                <div class="value-label inactive-text">AF</div>
                <div class="value-number inactive-text">10 - 25</div>
            </div>
            
            <!-- Temperature parameters -->
            <div class="value-card">
                <div class="value-label inactive-text">Temp.</div>
                <div class="value-number inactive-text">36.5 - 39</div>
            </div>
        </div>
    </div>
    
    <!-- Navigation buttons at bottom of page -->
    <div class="navigation">
        <!-- Back button with onclick event -->
        <button class="nav-btn" onclick="goBack()">← Terug</button>
        <!-- Confirm button with onclick event -->
        <button class="nav-btn primary" onclick="confirmSettings()">Bevestigen</button>
    </div>

            <!-- Import Heart Circle Component and main script -->
            <script src="heart-circle-component.js"></script>
            <script>
                        // SVG content embedded to avoid CORS issues
                        const svgContent = {
                            heart: `<svg class="organ-icon" viewBox="0 0 22 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.22 10.3743C12.0679 12.132 10.9163 15.0615 10.9163 19.1628M13.22 10.3743C12.0681 12.132 11.4922 14.4756 6.30842 14.4756M13.22 10.3743C14.6766 8.39884 16.9516 6.83964 19.3552 6.3986C20.0557 6.27006 20.6011 5.62288 20.4841 4.90863L20.2921 3.73684C20.1996 3.17181 19.7182 2.75127 19.159 2.81881C16.3987 3.15222 12.9705 4.8327 10.9162 7.44486C10.9162 6.27307 10.9162 2.75769 10.3402 1M5.73245 6.85896C5.15648 5.10127 4.00454 3.92948 2.27663 3.92948M1.70071 15.6441C2.85258 20.9171 7.26892 25 10.3401 25C13.4113 25 17.6365 20.9175 18.9799 15.6441C20.3232 10.3707 16.1 6.85563 13.2201 10.371C13.2201 8.61732 11.4922 6.85906 8.03639 6.85906C4.58057 6.85906 0.548838 10.371 1.70071 15.6441Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>`,
                            lung: `<svg class="organ-icon" viewBox="0 0 30 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.5007 5.62881C11.5007 4.02205 10.3628 2.41595 5.90178 6.31748C-0.397037 11.8263 1.7026 24.2213 2.40247 24.91C3.10233 25.5986 10.8008 22.1555 11.5007 20.7783C12.2006 19.4011 10.8008 17.3352 12.2006 14.5808M18.4993 5.62879C18.4993 4.02203 19.6372 2.41593 24.0982 6.31746C30.397 11.8263 28.2974 24.2213 27.5975 24.9099C26.8977 25.5985 19.1992 22.1555 18.4993 20.7783C17.7994 19.401 19.1992 17.3352 17.7994 14.5807M21.9987 16.6468C21.9987 13.3949 19.8717 11.7738 18.2519 10.7191C14.9109 8.54378 15 4.4935 15 0.999945C15 4.4935 15.0891 8.54378 11.7481 10.7191C10.1283 11.7738 8.00142 13.3949 8.00142 16.6468" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>`,
                            temp: `<svg class="organ-icon" viewBox="0 0 16 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.71349 0C3.94455 0 2.4982 1.42157 2.4982 3.15972V13.7459C0.944989 14.7857 0.000507593 16.5193 0 18.3844C0 21.4774 2.56656 24 5.71349 24C8.86042 24 11.4265 21.4774 11.4265 18.3844C11.4265 16.5193 10.482 14.7842 8.92828 13.7444V3.15972C8.92828 1.42157 7.48193 0 5.71349 0ZM5.71349 1.41162C6.71166 1.41162 7.49206 2.17865 7.49206 3.15972V14.1326C7.49212 14.2565 7.52539 14.3783 7.58851 14.4856C7.65162 14.5929 7.74237 14.682 7.85162 14.7438C9.17643 15.4954 9.99076 16.8812 9.99076 18.3844C9.99076 20.7144 8.08457 22.5884 5.714 22.5879C5.71383 22.5879 5.71416 22.5879 5.714 22.5879C3.34393 22.5884 1.43673 20.7144 1.43673 18.3849C1.43724 16.8822 2.25207 15.4964 3.57587 14.7453C3.68512 14.6834 3.77586 14.5944 3.83898 14.4871C3.9021 14.3798 3.93536 14.258 3.93543 14.1341V3.15972C3.93543 2.17865 4.71482 1.41162 5.71349 1.41162ZM11.5885 1.87453C11.3981 1.87455 11.2154 1.94891 11.0808 2.08127C10.9461 2.21363 10.8704 2.39315 10.8704 2.58033C10.8704 2.76752 10.9461 2.94704 11.0808 3.0794C11.2154 3.21176 11.3981 3.28613 11.5885 3.28615H15.2819C15.4723 3.28613 15.655 3.21176 15.7897 3.0794C15.9243 2.94704 16 2.76752 16 2.58033C16 2.39315 15.9243 2.21363 15.7896 2.08127C15.655 1.94891 15.4723 1.87455 15.2819 1.87453H11.5885ZM5.71349 2.58033C5.61915 2.58028 5.52572 2.59849 5.43854 2.63394C5.35136 2.66938 5.27214 2.72136 5.2054 2.7869C5.13867 2.85245 5.08572 2.93028 5.0496 3.01594C5.01348 3.1016 4.99488 3.19342 4.99487 3.28615V15.2102C3.51864 15.5338 2.40552 16.8384 2.40552 18.3834C2.40552 20.1708 3.89492 21.6347 5.71349 21.6347C7.53156 21.6347 9.02146 20.1708 9.02146 18.3834C9.02146 16.8384 7.90783 15.5348 6.4316 15.2102V3.28615C6.43158 3.09896 6.35592 2.91944 6.22125 2.78708C6.08658 2.65472 5.90394 2.58035 5.71349 2.58033ZM11.5885 5.10144C11.4942 5.10145 11.4008 5.11973 11.3136 5.15523C11.2265 5.19073 11.1473 5.24277 11.0806 5.30836C11.0139 5.37395 10.961 5.45182 10.925 5.5375C10.8889 5.62319 10.8704 5.71502 10.8704 5.80775C10.8704 5.99493 10.9461 6.17445 11.0808 6.30681C11.2154 6.43917 11.3981 6.51353 11.5885 6.51355H13.8431C14.0336 6.51353 14.2162 6.43917 14.3509 6.30681C14.4856 6.17445 14.5612 5.99493 14.5612 5.80775C14.5613 5.71502 14.5428 5.62319 14.5067 5.5375C14.4707 5.45182 14.4178 5.37395 14.3511 5.30836C14.2844 5.24277 14.2052 5.19073 14.1181 5.15523C14.0309 5.11972 13.9375 5.10145 13.8431 5.10144H11.5885ZM11.5885 8.32885C11.3981 8.32886 11.2154 8.40323 11.0808 8.53559C10.9461 8.66796 10.8704 8.84747 10.8704 9.03466C10.8704 9.22184 10.9461 9.40136 11.0808 9.53372C11.2154 9.66608 11.3981 9.74045 11.5885 9.74046H15.2819C15.4723 9.74045 15.655 9.66608 15.7896 9.53372C15.9243 9.40136 16 9.22184 16 9.03466C16 8.84747 15.9243 8.66796 15.7897 8.53559C15.655 8.40323 15.4723 8.32886 15.2819 8.32885H11.5885ZM11.5885 11.5563C11.3981 11.5563 11.2154 11.6306 11.0808 11.763C10.9461 11.8954 10.8704 12.0749 10.8704 12.2621C10.8704 12.4493 10.9461 12.6288 11.0808 12.7611C11.2154 12.8935 11.3981 12.9679 11.5885 12.9679H13.8431C14.0336 12.9679 14.2162 12.8935 14.3509 12.7611C14.4856 12.6288 14.5612 12.4493 14.5612 12.2621C14.5612 12.0749 14.4856 11.8954 14.3509 11.763C14.2162 11.6306 14.0336 11.5563 13.8431 11.5563H11.5885ZM5.71349 16.5437C6.75571 16.5437 7.58473 17.359 7.58473 18.3834C7.58473 19.4078 6.75571 20.2231 5.71349 20.2231C4.67127 20.2231 3.84174 19.4078 3.84174 18.3834C3.84174 17.359 4.67127 16.5437 5.71349 16.5437Z" fill="black"/>
                            </svg>`
                        };

                        // Utility to inject SVG content directly
                        function injectSVG(containerId, svgType) {
                            console.log(`Injecting ${svgType} SVG into ${containerId}`);
                            const container = document.getElementById(containerId);
                            if (!container) {
                                console.log(`Container ${containerId} not found`);
                                return;
                            }
                            const iconDiv = container.querySelector('.heart-white-center');
                            if (iconDiv) {
                                console.log(`Found white center in ${containerId}, injecting SVG`);
                                iconDiv.innerHTML = svgContent[svgType];
                                const svgEl = iconDiv.querySelector('svg');
                                if (svgEl) {
                                    svgEl.style.width = '70%';
                                    svgEl.style.height = '70%';
                                    svgEl.style.display = 'block';
                                    svgEl.style.margin = '0 auto';
                                    console.log(`SVG successfully injected into ${containerId}`);
                                }
                            } else {
                                console.log(`White center not found in ${containerId}`);
                                // Try again after a short delay
                                setTimeout(() => injectSVG(containerId, svgType), 50);
                            }
                        }
                        document.addEventListener('DOMContentLoaded', function() {
                            // Make all circles larger but still fit side by side
                            const circleSize = 130;
                            
                            console.log('Initializing heart circle components...');
                            
                            // Heart (circulatoir)
                            console.log('Creating heart component...');
                            new HeartCircleComponent('heart-circle-container', { size: circleSize, initialState: 'mid' });
                            setTimeout(() => injectSVG('heart-circle-container', 'heart'), 100);
                            
                            // Lung (respiratoir)
                            console.log('Creating lung component...');
                            new HeartCircleComponent('lung-circle-container', { size: circleSize, initialState: 'mid' });
                            setTimeout(() => injectSVG('lung-circle-container', 'lung'), 100);
                            
                            // Temp (overig)
                            console.log('Creating temp component...');
                            new HeartCircleComponent('temp-circle-container', { size: circleSize, initialState: 'mid' });
                            setTimeout(() => injectSVG('temp-circle-container', 'temp'), 100);
                        });
            </script>
            <script src="script.js"></script>
</body>
</html>

    <script>
        // Track selected options
    
        
        let selectedTags = [];
        let organSettings = {
            circulatoir: { active: true, severity: 'mild' },
            respiratoir: { active: true, severity: 'strak' },
            neuro: { active: false, severity: 'los' },
            lever: { active: false, severity: 'los' },
            nieren: { active: false, severity: 'los' },
            overig: { active: true, severity: 'mild' }
        };

        // Initialize interactive elements
        document.addEventListener('DOMContentLoaded', function() {
            initializeProblemButtons();
            initializeRiskButtons();
            initializeTagButtons();
            initializeOrganMonitoring();
            updateProgressBar();
        });

        // Problem selection functionality
        function initializeProblemButtons() {
            const problemButtons = document.querySelectorAll('.section:first-of-type .btn');
            problemButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove selected class from all buttons in this group
                    problemButtons.forEach(btn => btn.classList.remove('selected'));
                    // Add selected class to clicked button
                    this.classList.add('selected');
                    selectedProblem = this.textContent;
                    updateProgressBar();
                });
            });
        }

        // Risk level selection functionality
        function initializeRiskButtons() {
            const riskButtons = document.querySelectorAll('.btn.risk-low, .btn.risk-med, .btn.risk-high');
            riskButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove selected class from all risk buttons
                    riskButtons.forEach(btn => btn.classList.remove('selected'));
                    // Add selected class to clicked button
                    this.classList.add('selected');
                    selectedRiskLevel = this.textContent;
                    updateAlarmIndicator(this.textContent);
                    updateProgressBar();
                });
            });
        }

        // Tag selection functionality
        function initializeTagButtons() {
            const tagButtons = document.querySelectorAll('.tags-section .btn:not(.more-btn)');
            tagButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.toggle('selected');
                    const tagText = this.textContent;
                    
                    if (this.classList.contains('selected')) {
                        if (!selectedTags.includes(tagText)) {
                            selectedTags.push(tagText);
                        }
                    } else {
                        selectedTags = selectedTags.filter(tag => tag !== tagText);
                    }
                });
            });

            // More button functionality
            const moreBtn = document.querySelector('.more-btn');
            moreBtn.addEventListener('click', function() {
                alert('Meer opties worden binnenkort beschikbaar...');
            });
        }

        // Organ monitoring functionality
        function initializeOrganMonitoring() {
            const monitorItems = document.querySelectorAll('.monitor-item');
            monitorItems.forEach((item, index) => {
                const organNames = ['circulatoir', 'respiratoir', 'neuro', 'lever', 'nieren', 'overig'];
                const organName = organNames[index];
                
                item.addEventListener('click', function() {
                    toggleOrganMonitoring(organName, item);
                });
            });
        }

        function toggleOrganMonitoring(organName, element) {
            const circle = element.querySelector('.monitor-circle');
            const label = element.querySelector('.monitor-label');
            const status = element.querySelector('.monitor-status');
            
            if (organSettings[organName].active) {
                // Deactivate
                organSettings[organName].active = false;
                organSettings[organName].severity = 'los';
                circle.className = 'monitor-circle circle-inactive';
                label.classList.add('inactive-text');
                status.classList.add('inactive-text');
                status.textContent = 'los';
            } else {
                // Activate
                organSettings[organName].active = true;
                organSettings[organName].severity = 'mild';
                circle.className = 'monitor-circle circle-active';
                label.classList.remove('inactive-text');
                status.classList.remove('inactive-text');
                status.textContent = 'mild';
            }
            
            updateParameterCards();
        }

        function updateAlarmIndicator(riskLevel) {
            const alarmDiv = document.querySelector('.alarm-indicator');
            let alarmText = '';
            let bellCount = '';
            
            switch(riskLevel.toLowerCase()) {
                case 'laag':
                    bellCount = '🔔';
                    alarmText = 'langzamer een alarm';
                    break;
                case 'mid':
                    bellCount = '🔔 🔔';
                    alarmText = 'normaal alarm tempo';
                    break;
                case 'hoog':
                    bellCount = '🔔 🔔 🔔';
                    alarmText = 'sneller een alarm';
                    break;
            }
            
            alarmDiv.innerHTML = `<div>${bellCount}</div><div>${alarmText}</div>`;
        }

        function updateParameterCards() {
            const valueCards = document.querySelectorAll('.value-card');
            const organNames = ['circulatoir', 'respiratoir', 'neuro', 'lever', 'nieren', 'overig'];
            
            valueCards.forEach((card, index) => {
                const organName = organNames[index];
                const labels = card.querySelectorAll('.value-label');
                const numbers = card.querySelectorAll('.value-number');
                
                if (organSettings[organName].active) {
                    labels.forEach(label => label.classList.remove('inactive-text'));
                    numbers.forEach(number => number.classList.remove('inactive-text'));
                } else {
                    labels.forEach(label => label.classList.add('inactive-text'));
                    numbers.forEach(number => number.classList.add('inactive-text'));
                }
            });
        }

        function updateProgressBar() {
            const stepNumbers = document.querySelectorAll('.step-number');
            let completedSteps = 1; // Always start with step 1
            
            if (selectedProblem) completedSteps = 2;
            if (selectedRiskLevel) completedSteps = 3;
            
            stepNumbers.forEach((step, index) => {
                if (index < completedSteps) {
                    step.classList.remove('inactive');
                    if (index === completedSteps - 1) {
                        step.style.backgroundColor = '#007bff';
                    }
                } else {
                    step.classList.add('inactive');
                }
            });
        }

        // Navigation functions
        function goBack() {
            if (confirm('Weet je zeker dat je terug wilt gaan? Alle wijzigingen gaan verloren.')) {
                // Reset all selections
                selectedProblem = null;
                selectedRiskLevel = null;
                selectedTags = [];
                
                // Reset UI
                document.querySelectorAll('.btn.selected').forEach(btn => btn.classList.remove('selected'));
                updateProgressBar();
                
                alert('Terug naar vorige stap...');
            }
        }

        function confirmSettings() {
            if (!selectedProblem || !selectedRiskLevel) {
                alert('Selecteer eerst een hoofdprobleem en risico niveau voordat je doorgaat.');
                return;
            }
            
            const summary = `
Overzicht instellingen:
- Hoofdprobleem: ${selectedProblem}
- Risico niveau: ${selectedRiskLevel}
- Additionele tags: ${selectedTags.length > 0 ? selectedTags.join(', ') : 'Geen'}
- Actieve monitoring: ${Object.keys(organSettings).filter(organ => organSettings[organ].active).join(', ')}
            `;
            
            if (confirm(summary + '\n\nWil je deze instellingen bevestigen?')) {
                alert('Instellingen opgeslagen! Patiënt monitoring is geactiveerd.');
                
                // Simulate moving to next step
                const lastStep = document.querySelector('.step:last-child .step-number');
                lastStep.classList.remove('inactive');
                lastStep.textContent = '✓';
                lastStep.style.backgroundColor = '#28a745';
            }
        }

        // Add hover effects for better UX
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('.btn, .nav-btn');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    if (!this.classList.contains('selected')) {
                        this.style.transform = 'scale(1.05)';
                        this.style.transition = 'transform 0.2s ease';
                    }
                });
                
                button.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });


        });  
    </script>
</body>
</html>